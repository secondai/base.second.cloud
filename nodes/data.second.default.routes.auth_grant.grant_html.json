{
  "name": "base.second.cloud.data.second.default.routes.auth_grant.grant_html",
  "type": "types.second.default.code.html",
  "data": {
    "html": "<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n    <title>Auth Grant</title>\n    <script src=\"https://unpkg.com/react@16/umd/react.development.js\"></script>\n    <script src=\"https://unpkg.com/react-dom@16/umd/react-dom.development.js\"></script>\n    \n    <!-- Don't use this in production: -->\n    <script src=\"https://unpkg.com/babel-standalone@6.15.0/babel.min.js\"></script>\n    \n    <style>\n      .nodisplay {\n        display: none;\n      }\n    </style>\n    \n  </head>\n  <body>\n    <div id=\"root\"></div>\n    <script type=\"text/babel\">\n      \n      // require a login page (stored in session/cookie) \n      // if logged in, show the button to grant a new token \n      \n      \n      class App extends React.Component {\n        constructor(props){\n          super(props);\n          this.state = {}\n        }\n        render() { \n          return (\n            <div>\n              <h1>Grant Permissions</h1>\n              <Main />\n            </div>\n          ); \n        } \n      }\n      \n      class Main extends React.Component {\n        constructor(props){\n          super(props);\n          \n          let urlParams = new URLSearchParams(window.location.search);\n          let redirectTo = urlParams.get('redirect');\n          \n          this.state = {\n            redirectTo\n          }\n        }\n        handleRedirect = ()=>{\n          // NOT USED\n          // - form is POST'd to server \n          return false;\n          \n          console.log('Redirect!');\n          let urlParams = new URLSearchParams(window.location.search);\n          let redirectTo = urlParams.get('redirect');\n          \n          console.log('redirectTo:', redirectTo);\n          \n          redirectTo = redirectTo + '#token=xyz123';\n          \n          window.location = redirectTo;\n\n        }\n        render(){\n          return (\n            <form method=\"post\" action={\"/auth/grant?redirect=\" + this.state.redirectTo}>\n              <input type=\"submit\" value=\"Grant and Redirect Back\" />\n              {/*<button onClick={this.handleRedirect}>Grant and Redirect Back</button>*/}\n            </form>\n          )\n        }\n        \n      }\n      \n      \n      \n      ReactDOM.render(\n        <App />,\n        document.getElementById('root')\n      );\n\n    </script>\n    \n    \n  </body>\n</html>"
  },
  "blobdata": null,
  "createdAt": "2019-03-05T22:38:14.165Z",
  "updatedAt": "2019-03-19T18:42:30.128Z",
  "nodes": []
}